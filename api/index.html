
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://dewet22.github.io/givenergy-modbus/api/">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>Modules - GivEnergy Modbus</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="indigo" data-md-color-accent="indigo">
      
        <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#givenergy_modbus" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://dewet22.github.io/givenergy-modbus" title="GivEnergy Modbus" class="md-header-nav__button md-logo" aria-label="GivEnergy Modbus">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            GivEnergy Modbus
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Modules
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/dewet22/givenergy-modbus/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dewet22/givenergy-modbus
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://dewet22.github.io/givenergy-modbus" title="GivEnergy Modbus" class="md-nav__button md-logo" aria-label="GivEnergy Modbus">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    GivEnergy Modbus
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/dewet22/givenergy-modbus/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dewet22/givenergy-modbus
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Modules
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus" class="md-nav__link">
    givenergy_modbus
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.cli" class="md-nav__link">
    cli
  </a>
  
    <nav class="md-nav" aria-label="cli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.cli.is_documented_by" class="md-nav__link">
    is_documented_by()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.client" class="md-nav__link">
    client
  </a>
  
    <nav class="md-nav" aria-label="client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient" class="md-nav__link">
    GivEnergyClient
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.disable_charge" class="md-nav__link">
    disable_charge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.disable_charge_target" class="md-nav__link">
    disable_charge_target()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.disable_discharge" class="md-nav__link">
    disable_discharge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.enable_charge" class="md-nav__link">
    enable_charge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.enable_charge_target" class="md-nav__link">
    enable_charge_target()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.enable_discharge" class="md-nav__link">
    enable_discharge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.fetch_register_pages" class="md-nav__link">
    fetch_register_pages()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.refresh_plant" class="md-nav__link">
    refresh_plant()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_charge_slot_1" class="md-nav__link">
    reset_charge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_charge_slot_2" class="md-nav__link">
    reset_charge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_1" class="md-nav__link">
    reset_discharge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_2" class="md-nav__link">
    reset_discharge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_charge_limit" class="md-nav__link">
    set_battery_charge_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_limit" class="md-nav__link">
    set_battery_discharge_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_demand" class="md-nav__link">
    set_battery_discharge_mode_demand()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_max_power" class="md-nav__link">
    set_battery_discharge_mode_max_power()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_power_reserve" class="md-nav__link">
    set_battery_power_reserve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_target_soc" class="md-nav__link">
    set_battery_target_soc()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_charge_slot_1" class="md-nav__link">
    set_charge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_charge_slot_2" class="md-nav__link">
    set_charge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_datetime" class="md-nav__link">
    set_datetime()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_enable" class="md-nav__link">
    set_discharge_enable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_slot_1" class="md-nav__link">
    set_discharge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_slot_2" class="md-nav__link">
    set_discharge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_mode_dynamic" class="md-nav__link">
    set_mode_dynamic()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_mode_storage" class="md-nav__link">
    set_mode_storage()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_shallow_charge" class="md-nav__link">
    set_shallow_charge()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder" class="md-nav__link">
    decoder
  </a>
  
    <nav class="md-nav" aria-label="decoder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyDecoder" class="md-nav__link">
    GivEnergyDecoder
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyDecoder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyDecoder.decode" class="md-nav__link">
    decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyDecoder.lookupPduClass" class="md-nav__link">
    lookupPduClass()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyRequestDecoder" class="md-nav__link">
    GivEnergyRequestDecoder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyResponseDecoder" class="md-nav__link">
    GivEnergyResponseDecoder
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.framer" class="md-nav__link">
    framer
  </a>
  
    <nav class="md-nav" aria-label="framer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer" class="md-nav__link">
    GivEnergyModbusFramer
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyModbusFramer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.addToFrame" class="md-nav__link">
    addToFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.advanceFrame" class="md-nav__link">
    advanceFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.buildPacket" class="md-nav__link">
    buildPacket()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.checkFrame" class="md-nav__link">
    checkFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.decode_data" class="md-nav__link">
    decode_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.getFrame" class="md-nav__link">
    getFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.getRawFrame" class="md-nav__link">
    getRawFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.isFrameReady" class="md-nav__link">
    isFrameReady()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.populateResult" class="md-nav__link">
    populateResult()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.processIncomingPacket" class="md-nav__link">
    processIncomingPacket()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.resetFrame" class="md-nav__link">
    resetFrame()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus" class="md-nav__link">
    modbus
  </a>
  
    <nav class="md-nav" aria-label="modbus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient" class="md-nav__link">
    GivEnergyModbusTcpClient
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyModbusTcpClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_holding_registers" class="md-nav__link">
    read_holding_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_input_registers" class="md-nav__link">
    read_input_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_registers" class="md-nav__link">
    read_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.write_holding_register" class="md-nav__link">
    write_holding_register()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.model" class="md-nav__link">
    model
  </a>
  
    <nav class="md-nav" aria-label="model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel" class="md-nav__link">
    GivEnergyBaseModel
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyBaseModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel.Config" class="md-nav__link">
    Config
  </a>
  
    <nav class="md-nav" aria-label="Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict" class="md-nav__link">
    getter_dict
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.battery" class="md-nav__link">
    battery
  </a>
  
    <nav class="md-nav" aria-label="battery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.battery.Battery" class="md-nav__link">
    Battery
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter" class="md-nav__link">
    inverter
  </a>
  
    <nav class="md-nav" aria-label="inverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Inverter" class="md-nav__link">
    Inverter
  </a>
  
    <nav class="md-nav" aria-label="Inverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Inverter.compute_firmware_version" class="md-nav__link">
    compute_firmware_version()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Inverter.compute_model" class="md-nav__link">
    compute_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Model" class="md-nav__link">
    Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.UnknownModelError" class="md-nav__link">
    UnknownModelError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.plant" class="md-nav__link">
    plant
  </a>
  
    <nav class="md-nav" aria-label="plant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.plant.Plant" class="md-nav__link">
    Plant
  </a>
  
    <nav class="md-nav" aria-label="Plant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.plant.Plant.refresh" class="md-nav__link">
    refresh()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register" class="md-nav__link">
    register
  </a>
  
    <nav class="md-nav" aria-label="register">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.HoldingRegister" class="md-nav__link">
    HoldingRegister
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.InputRegister" class="md-nav__link">
    InputRegister
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Register" class="md-nav__link">
    Register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Scaling" class="md-nav__link">
    Scaling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Type" class="md-nav__link">
    Type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Unit" class="md-nav__link">
    Unit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache" class="md-nav__link">
    register_cache
  </a>
  
    <nav class="md-nav" aria-label="register_cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache" class="md-nav__link">
    RegisterCache
  </a>
  
    <nav class="md-nav" aria-label="RegisterCache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.__getattr__" class="md-nav__link">
    __getattr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.debug" class="md-nav__link">
    debug()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.set_registers" class="md-nav__link">
    set_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.to_json" class="md-nav__link">
    to_json()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_getter" class="md-nav__link">
    register_getter
  </a>
  
    <nav class="md-nav" aria-label="register_getter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_getter.RegisterGetter" class="md-nav__link">
    RegisterGetter
  </a>
  
    <nav class="md-nav" aria-label="RegisterGetter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_getter.RegisterGetter.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu" class="md-nav__link">
    pdu
  </a>
  
    <nav class="md-nav" aria-label="pdu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse" class="md-nav__link">
    ErrorResponse
  </a>
  
    <nav class="md-nav" aria-label="ErrorResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse.decode" class="md-nav__link">
    decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse.encode" class="md-nav__link">
    encode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse.get_response_pdu_size" class="md-nav__link">
    get_response_pdu_size()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU" class="md-nav__link">
    ModbusPDU
  </a>
  
    <nav class="md-nav" aria-label="ModbusPDU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.decode" class="md-nav__link">
    decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.encode" class="md-nav__link">
    encode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.get_response_pdu_size" class="md-nav__link">
    get_response_pdu_size()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusRequest" class="md-nav__link">
    ModbusRequest
  </a>
  
    <nav class="md-nav" aria-label="ModbusRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusRequest.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusResponse" class="md-nav__link">
    ModbusResponse
  </a>
  
    <nav class="md-nav" aria-label="ModbusResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusResponse.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersMeta" class="md-nav__link">
    ReadHoldingRegistersMeta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersRequest" class="md-nav__link">
    ReadHoldingRegistersRequest
  </a>
  
    <nav class="md-nav" aria-label="ReadHoldingRegistersRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersRequest.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersResponse" class="md-nav__link">
    ReadHoldingRegistersResponse
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersMeta" class="md-nav__link">
    ReadInputRegistersMeta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersRequest" class="md-nav__link">
    ReadInputRegistersRequest
  </a>
  
    <nav class="md-nav" aria-label="ReadInputRegistersRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersRequest.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersResponse" class="md-nav__link">
    ReadInputRegistersResponse
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersRequest" class="md-nav__link">
    ReadRegistersRequest
  </a>
  
    <nav class="md-nav" aria-label="ReadRegistersRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersRequest.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersResponse" class="md-nav__link">
    ReadRegistersResponse
  </a>
  
    <nav class="md-nav" aria-label="ReadRegistersResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersResponse.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersResponse.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.WriteHoldingRegisterMeta" class="md-nav__link">
    WriteHoldingRegisterMeta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.WriteHoldingRegisterRequest" class="md-nav__link">
    WriteHoldingRegisterRequest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.WriteHoldingRegisterResponse" class="md-nav__link">
    WriteHoldingRegisterResponse
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.transaction" class="md-nav__link">
    transaction
  </a>
  
    <nav class="md-nav" aria-label="transaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.transaction.GivEnergyTransactionManager" class="md-nav__link">
    GivEnergyTransactionManager
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyTransactionManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.transaction.GivEnergyTransactionManager.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.util" class="md-nav__link">
    util
  </a>
  
    <nav class="md-nav" aria-label="util">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.InterceptHandler" class="md-nav__link">
    InterceptHandler
  </a>
  
    <nav class="md-nav" aria-label="InterceptHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.InterceptHandler.emit" class="md-nav__link">
    emit()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.friendly_class_name" class="md-nav__link">
    friendly_class_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.hexlify" class="md-nav__link">
    hexlify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.hexxed" class="md-nav__link">
    hexxed()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus" class="md-nav__link">
    givenergy_modbus
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.cli" class="md-nav__link">
    cli
  </a>
  
    <nav class="md-nav" aria-label="cli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.cli.is_documented_by" class="md-nav__link">
    is_documented_by()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.client" class="md-nav__link">
    client
  </a>
  
    <nav class="md-nav" aria-label="client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient" class="md-nav__link">
    GivEnergyClient
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.disable_charge" class="md-nav__link">
    disable_charge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.disable_charge_target" class="md-nav__link">
    disable_charge_target()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.disable_discharge" class="md-nav__link">
    disable_discharge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.enable_charge" class="md-nav__link">
    enable_charge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.enable_charge_target" class="md-nav__link">
    enable_charge_target()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.enable_discharge" class="md-nav__link">
    enable_discharge()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.fetch_register_pages" class="md-nav__link">
    fetch_register_pages()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.refresh_plant" class="md-nav__link">
    refresh_plant()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_charge_slot_1" class="md-nav__link">
    reset_charge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_charge_slot_2" class="md-nav__link">
    reset_charge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_1" class="md-nav__link">
    reset_discharge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_2" class="md-nav__link">
    reset_discharge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_charge_limit" class="md-nav__link">
    set_battery_charge_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_limit" class="md-nav__link">
    set_battery_discharge_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_demand" class="md-nav__link">
    set_battery_discharge_mode_demand()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_max_power" class="md-nav__link">
    set_battery_discharge_mode_max_power()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_power_reserve" class="md-nav__link">
    set_battery_power_reserve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_battery_target_soc" class="md-nav__link">
    set_battery_target_soc()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_charge_slot_1" class="md-nav__link">
    set_charge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_charge_slot_2" class="md-nav__link">
    set_charge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_datetime" class="md-nav__link">
    set_datetime()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_enable" class="md-nav__link">
    set_discharge_enable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_slot_1" class="md-nav__link">
    set_discharge_slot_1()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_slot_2" class="md-nav__link">
    set_discharge_slot_2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_mode_dynamic" class="md-nav__link">
    set_mode_dynamic()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_mode_storage" class="md-nav__link">
    set_mode_storage()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.client.GivEnergyClient.set_shallow_charge" class="md-nav__link">
    set_shallow_charge()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder" class="md-nav__link">
    decoder
  </a>
  
    <nav class="md-nav" aria-label="decoder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyDecoder" class="md-nav__link">
    GivEnergyDecoder
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyDecoder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyDecoder.decode" class="md-nav__link">
    decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyDecoder.lookupPduClass" class="md-nav__link">
    lookupPduClass()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyRequestDecoder" class="md-nav__link">
    GivEnergyRequestDecoder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.decoder.GivEnergyResponseDecoder" class="md-nav__link">
    GivEnergyResponseDecoder
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.framer" class="md-nav__link">
    framer
  </a>
  
    <nav class="md-nav" aria-label="framer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer" class="md-nav__link">
    GivEnergyModbusFramer
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyModbusFramer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.addToFrame" class="md-nav__link">
    addToFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.advanceFrame" class="md-nav__link">
    advanceFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.buildPacket" class="md-nav__link">
    buildPacket()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.checkFrame" class="md-nav__link">
    checkFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.decode_data" class="md-nav__link">
    decode_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.getFrame" class="md-nav__link">
    getFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.getRawFrame" class="md-nav__link">
    getRawFrame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.isFrameReady" class="md-nav__link">
    isFrameReady()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.populateResult" class="md-nav__link">
    populateResult()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.processIncomingPacket" class="md-nav__link">
    processIncomingPacket()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.framer.GivEnergyModbusFramer.resetFrame" class="md-nav__link">
    resetFrame()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus" class="md-nav__link">
    modbus
  </a>
  
    <nav class="md-nav" aria-label="modbus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient" class="md-nav__link">
    GivEnergyModbusTcpClient
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyModbusTcpClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_holding_registers" class="md-nav__link">
    read_holding_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_input_registers" class="md-nav__link">
    read_input_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_registers" class="md-nav__link">
    read_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.write_holding_register" class="md-nav__link">
    write_holding_register()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.model" class="md-nav__link">
    model
  </a>
  
    <nav class="md-nav" aria-label="model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel" class="md-nav__link">
    GivEnergyBaseModel
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyBaseModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel.Config" class="md-nav__link">
    Config
  </a>
  
    <nav class="md-nav" aria-label="Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict" class="md-nav__link">
    getter_dict
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.battery" class="md-nav__link">
    battery
  </a>
  
    <nav class="md-nav" aria-label="battery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.battery.Battery" class="md-nav__link">
    Battery
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter" class="md-nav__link">
    inverter
  </a>
  
    <nav class="md-nav" aria-label="inverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Inverter" class="md-nav__link">
    Inverter
  </a>
  
    <nav class="md-nav" aria-label="Inverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Inverter.compute_firmware_version" class="md-nav__link">
    compute_firmware_version()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Inverter.compute_model" class="md-nav__link">
    compute_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.Model" class="md-nav__link">
    Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.inverter.UnknownModelError" class="md-nav__link">
    UnknownModelError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.plant" class="md-nav__link">
    plant
  </a>
  
    <nav class="md-nav" aria-label="plant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.plant.Plant" class="md-nav__link">
    Plant
  </a>
  
    <nav class="md-nav" aria-label="Plant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.plant.Plant.refresh" class="md-nav__link">
    refresh()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register" class="md-nav__link">
    register
  </a>
  
    <nav class="md-nav" aria-label="register">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.HoldingRegister" class="md-nav__link">
    HoldingRegister
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.InputRegister" class="md-nav__link">
    InputRegister
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Register" class="md-nav__link">
    Register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Scaling" class="md-nav__link">
    Scaling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Type" class="md-nav__link">
    Type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register.Unit" class="md-nav__link">
    Unit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache" class="md-nav__link">
    register_cache
  </a>
  
    <nav class="md-nav" aria-label="register_cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache" class="md-nav__link">
    RegisterCache
  </a>
  
    <nav class="md-nav" aria-label="RegisterCache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.__getattr__" class="md-nav__link">
    __getattr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.debug" class="md-nav__link">
    debug()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.set_registers" class="md-nav__link">
    set_registers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_cache.RegisterCache.to_json" class="md-nav__link">
    to_json()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_getter" class="md-nav__link">
    register_getter
  </a>
  
    <nav class="md-nav" aria-label="register_getter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_getter.RegisterGetter" class="md-nav__link">
    RegisterGetter
  </a>
  
    <nav class="md-nav" aria-label="RegisterGetter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.model.register_getter.RegisterGetter.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu" class="md-nav__link">
    pdu
  </a>
  
    <nav class="md-nav" aria-label="pdu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse" class="md-nav__link">
    ErrorResponse
  </a>
  
    <nav class="md-nav" aria-label="ErrorResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse.decode" class="md-nav__link">
    decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse.encode" class="md-nav__link">
    encode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ErrorResponse.get_response_pdu_size" class="md-nav__link">
    get_response_pdu_size()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU" class="md-nav__link">
    ModbusPDU
  </a>
  
    <nav class="md-nav" aria-label="ModbusPDU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.decode" class="md-nav__link">
    decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.encode" class="md-nav__link">
    encode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusPDU.get_response_pdu_size" class="md-nav__link">
    get_response_pdu_size()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusRequest" class="md-nav__link">
    ModbusRequest
  </a>
  
    <nav class="md-nav" aria-label="ModbusRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusRequest.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusResponse" class="md-nav__link">
    ModbusResponse
  </a>
  
    <nav class="md-nav" aria-label="ModbusResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ModbusResponse.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersMeta" class="md-nav__link">
    ReadHoldingRegistersMeta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersRequest" class="md-nav__link">
    ReadHoldingRegistersRequest
  </a>
  
    <nav class="md-nav" aria-label="ReadHoldingRegistersRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersRequest.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadHoldingRegistersResponse" class="md-nav__link">
    ReadHoldingRegistersResponse
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersMeta" class="md-nav__link">
    ReadInputRegistersMeta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersRequest" class="md-nav__link">
    ReadInputRegistersRequest
  </a>
  
    <nav class="md-nav" aria-label="ReadInputRegistersRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersRequest.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadInputRegistersResponse" class="md-nav__link">
    ReadInputRegistersResponse
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersRequest" class="md-nav__link">
    ReadRegistersRequest
  </a>
  
    <nav class="md-nav" aria-label="ReadRegistersRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersRequest.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersResponse" class="md-nav__link">
    ReadRegistersResponse
  </a>
  
    <nav class="md-nav" aria-label="ReadRegistersResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersResponse.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.ReadRegistersResponse.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.WriteHoldingRegisterMeta" class="md-nav__link">
    WriteHoldingRegisterMeta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.WriteHoldingRegisterRequest" class="md-nav__link">
    WriteHoldingRegisterRequest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.pdu.WriteHoldingRegisterResponse" class="md-nav__link">
    WriteHoldingRegisterResponse
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.transaction" class="md-nav__link">
    transaction
  </a>
  
    <nav class="md-nav" aria-label="transaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.transaction.GivEnergyTransactionManager" class="md-nav__link">
    GivEnergyTransactionManager
  </a>
  
    <nav class="md-nav" aria-label="GivEnergyTransactionManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.transaction.GivEnergyTransactionManager.execute" class="md-nav__link">
    execute()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#givenergy_modbus.util" class="md-nav__link">
    util
  </a>
  
    <nav class="md-nav" aria-label="util">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.InterceptHandler" class="md-nav__link">
    InterceptHandler
  </a>
  
    <nav class="md-nav" aria-label="InterceptHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.InterceptHandler.emit" class="md-nav__link">
    emit()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.friendly_class_name" class="md-nav__link">
    friendly_class_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.hexlify" class="md-nav__link">
    hexlify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#givenergy_modbus.util.hexxed" class="md-nav__link">
    hexxed()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dewet22/givenergy-modbus/edit/master/docs/api.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Modules</h1>
                
                <div class="doc doc-object doc-module">

<a id="givenergy_modbus"></a>
    <div class="doc doc-contents first">

      <p>Top-level package for GivEnergy Modbus.</p>



  <div class="doc doc-children">













  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.cli" class="doc doc-heading">
        <code>cli</code>



<a href="#givenergy_modbus.cli" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Console script for interacting with GivEnergy inverters.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="givenergy_modbus.cli.is_documented_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_documented_by</span><span class="p">(</span><span class="n">original</span><span class="p">)</span></code>


<a href="#givenergy_modbus.cli.is_documented_by" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Copies the docstring from the original source to the decorated target.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/cli.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_documented_by</span><span class="p">(</span><span class="n">original</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Copies the docstring from the original source to the decorated target.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
        <span class="n">target</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">original</span><span class="o">.</span><span class="vm">__doc__</span>
        <span class="k">return</span> <span class="n">target</span>

    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.client" class="doc doc-heading">
        <code>client</code>



<a href="#givenergy_modbus.client" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.client.GivEnergyClient" class="doc doc-heading">
        <code>GivEnergyClient</code>



<a href="#givenergy_modbus.client.GivEnergyClient" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Client for end users to conveniently access GivEnergy inverters.</p>




  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.disable_charge" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_charge</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.disable_charge" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Disable the battery from charging.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable_charge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Disable the battery from charging.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">ENABLE_CHARGE</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.disable_charge_target" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_charge_target</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.disable_charge_target" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Removes SOC limit and target 100% charging.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable_charge_target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Removes SOC limit and target 100% charging.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">ENABLE_CHARGE_TARGET</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_TARGET_SOC</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.disable_discharge" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_discharge</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.disable_discharge" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery to not discharge at all.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable_discharge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery to not discharge at all.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">ENABLE_DISCHARGE</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.enable_charge" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_charge</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.enable_charge" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery to charge, depending on the mode and slots set.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable_charge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery to charge, depending on the mode and slots set.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">ENABLE_CHARGE</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.enable_charge_target" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_charge_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_soc</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.enable_charge_target" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Sets inverter to stop charging when SOC reaches the desired level. Also referred to as "winter mode".</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable_charge_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_soc</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets inverter to stop charging when SOC reaches the desired level. Also referred to as &quot;winter mode&quot;.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="mi">4</span> <span class="o">&lt;=</span> <span class="n">target_soc</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Specified Charge Target SOC (</span><span class="si">{</span><span class="n">target_soc</span><span class="si">}</span><span class="s1">) is not in [4-100]&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">target_soc</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disable_charge_target</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">ENABLE_CHARGE_TARGET</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_TARGET_SOC</span><span class="p">,</span> <span class="n">target_soc</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.enable_discharge" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_discharge</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.enable_discharge" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery to discharge, depending on the mode and slots set.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable_discharge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery to discharge, depending on the mode and slots set.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">ENABLE_DISCHARGE</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.fetch_register_pages" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fetch_register_pages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pages</span><span class="p">,</span> <span class="n">register_cache</span><span class="p">,</span> <span class="n">slave_address</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">sleep_between_queries</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.fetch_register_pages" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Reload all inverter data from the device.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fetch_register_pages</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">pages</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">HoldingRegister</span> <span class="o">|</span> <span class="n">InputRegister</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
    <span class="n">register_cache</span><span class="p">:</span> <span class="n">RegisterCache</span><span class="p">,</span>
    <span class="n">slave_address</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mh">0x32</span><span class="p">,</span>
    <span class="n">sleep_between_queries</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_SLEEP</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Reload all inverter data from the device.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">register</span><span class="p">,</span> <span class="n">base_registers</span> <span class="ow">in</span> <span class="n">pages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">base_register</span> <span class="ow">in</span> <span class="n">base_registers</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">read_registers</span><span class="p">(</span><span class="n">register</span><span class="p">,</span> <span class="n">base_register</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="n">slave_address</span><span class="o">=</span><span class="n">slave_address</span><span class="p">)</span>
            <span class="n">register_cache</span><span class="o">.</span><span class="n">set_registers</span><span class="p">(</span><span class="n">register</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">t</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep_between_queries</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.refresh_plant" class="doc doc-heading">
<code class="highlight language-python"><span class="n">refresh_plant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plant</span><span class="p">,</span> <span class="n">full_refresh</span><span class="p">,</span> <span class="n">sleep_between_queries</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.refresh_plant" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Refresh the internal caches for a plant. Optionally refresh only data that changes frequently.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">refresh_plant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plant</span><span class="p">:</span> <span class="n">Plant</span><span class="p">,</span> <span class="n">full_refresh</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">sleep_between_queries</span><span class="o">=</span><span class="n">DEFAULT_SLEEP</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Refresh the internal caches for a plant. Optionally refresh only data that changes frequently.&quot;&quot;&quot;</span>
    <span class="n">inverter_registers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">InputRegister</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">full_refresh</span><span class="p">:</span>
        <span class="n">inverter_registers</span><span class="p">[</span><span class="n">HoldingRegister</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">120</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_register_pages</span><span class="p">(</span>
        <span class="n">inverter_registers</span><span class="p">,</span> <span class="n">plant</span><span class="o">.</span><span class="n">_inverter_rc</span><span class="p">,</span> <span class="n">slave_address</span><span class="o">=</span><span class="mh">0x32</span><span class="p">,</span> <span class="n">sleep_between_queries</span><span class="o">=</span><span class="n">sleep_between_queries</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">battery_rc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plant</span><span class="o">.</span><span class="n">_batteries_rcs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fetch_register_pages</span><span class="p">(</span>
            <span class="p">{</span><span class="n">InputRegister</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">]},</span>
            <span class="n">battery_rc</span><span class="p">,</span>
            <span class="n">slave_address</span><span class="o">=</span><span class="mh">0x32</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span>
            <span class="n">sleep_between_queries</span><span class="o">=</span><span class="n">sleep_between_queries</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="n">plant</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.reset_charge_slot_1" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset_charge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.reset_charge_slot_1" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Reset first charge slot times to zero/disabled.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reset_charge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reset first charge slot times to zero/disabled.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_1_START</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_1_END</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.reset_charge_slot_2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset_charge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.reset_charge_slot_2" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Reset second charge slot times to zero/disabled.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reset_charge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reset second charge slot times to zero/disabled.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_2_START</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_2_END</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_1" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset_discharge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_1" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Reset first discharge slot times to zero/disabled.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reset_discharge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reset first discharge slot times to zero/disabled.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_1_START</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_1_END</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset_discharge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.reset_discharge_slot_2" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Reset first discharge slot times to zero/disabled.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reset_discharge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reset first discharge slot times to zero/disabled.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_2_START</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_2_END</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_battery_charge_limit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_battery_charge_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_battery_charge_limit" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery charge limit.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_battery_charge_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery charge limit.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="mi">50</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Specified Charge Limit (</span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">%) is not in [0-50]%&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">BATTERY_CHARGE_LIMIT</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_battery_discharge_limit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_battery_discharge_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_limit" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery discharge limit.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_battery_discharge_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery discharge limit.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="mi">50</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Specified Discharge Limit (</span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">%) is not in [0-50]%&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">BATTERY_DISCHARGE_LIMIT</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_demand" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_battery_discharge_mode_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_demand" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery to discharge to match demand (no export) when discharging.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_battery_discharge_mode_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery to discharge to match demand (no export) when discharging.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">BATTERY_POWER_MODE</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_max_power" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_battery_discharge_mode_max_power</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_battery_discharge_mode_max_power" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery to discharge at maximum power (export) when discharging.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_battery_discharge_mode_max_power</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery to discharge at maximum power (export) when discharging.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">BATTERY_POWER_MODE</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_battery_power_reserve" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_battery_power_reserve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_battery_power_reserve" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery power reserve to maintain.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_battery_power_reserve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery power reserve to maintain.&quot;&quot;&quot;</span>
    <span class="c1"># TODO what are valid values?</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">BATTERY_DISCHARGE_MIN_POWER_RESERVE</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_battery_target_soc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_battery_target_soc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_battery_target_soc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the target SOC when the battery charges.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_battery_target_soc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the target SOC when the battery charges.&quot;&quot;&quot;</span>
    <span class="c1"># TODO what are valid values?</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_TARGET_SOC</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_charge_slot_1" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_charge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_charge_slot_1" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set first charge slot times.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_charge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">time</span><span class="p">,</span> <span class="n">time</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Set first charge slot times.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_1_START</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">)))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_1_END</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">)))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_charge_slot_2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_charge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_charge_slot_2" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set second charge slot times.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_charge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">time</span><span class="p">,</span> <span class="n">time</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Set second charge slot times.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_2_START</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">)))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">CHARGE_SLOT_2_END</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">)))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_datetime" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_datetime" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the date &amp; time of the inverter.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="n">datetime</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the date &amp; time of the inverter.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">SYSTEM_TIME_YEAR</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">SYSTEM_TIME_MONTH</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">SYSTEM_TIME_DAY</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">SYSTEM_TIME_HOUR</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">SYSTEM_TIME_MINUTE</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">SYSTEM_TIME_SECOND</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_discharge_enable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_discharge_enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_enable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the battery to discharge.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_discharge_enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the battery to discharge.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">ENABLE_DISCHARGE</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_discharge_slot_1" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_discharge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_slot_1" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set first discharge slot times.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_discharge_slot_1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">time</span><span class="p">,</span> <span class="n">time</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Set first discharge slot times.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span>
        <span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_1_START</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_1_END</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">)))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_discharge_slot_2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_discharge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_discharge_slot_2" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set second discharge slot times.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_discharge_slot_2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">time</span><span class="p">,</span> <span class="n">time</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Set second discharge slot times.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span>
        <span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_2_START</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">DISCHARGE_SLOT_2_END</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H%M&#39;</span><span class="p">)))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_mode_dynamic" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_mode_dynamic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_mode_dynamic" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set system to Dynamic / Eco mode.</p>
<p>This mode is designed to maximise use of solar generation. The battery will charge when
there is excess power being generated from your solar panels. The battery will store and hold this energy
until your demand increases. The system will try and balance the use of solar and battery so that you are
importing and exporting as little energy as possible. This mode is useful if you want to maximise
self-consumption of renewable generation and minimise the amount of energy drawn from the grid.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_mode_dynamic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set system to Dynamic / Eco mode.</span>

<span class="sd">    This mode is designed to maximise use of solar generation. The battery will charge when</span>
<span class="sd">    there is excess power being generated from your solar panels. The battery will store and hold this energy</span>
<span class="sd">    until your demand increases. The system will try and balance the use of solar and battery so that you are</span>
<span class="sd">    importing and exporting as little energy as possible. This mode is useful if you want to maximise</span>
<span class="sd">    self-consumption of renewable generation and minimise the amount of energy drawn from the grid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_battery_discharge_mode_demand</span><span class="p">()</span>  <span class="c1"># r27=1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_shallow_charge</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># r110=4</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">disable_discharge</span><span class="p">()</span>  <span class="c1"># r59=0</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_mode_storage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_mode_storage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot_1</span><span class="o">=</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="n">slot_2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">export</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_mode_storage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set system to storage mode with specific discharge slots(s).</p>
<p>This mode stores excess solar generation during the day and holds that energy ready for use later in the day.
By default, the battery will start to discharge from 4pm-7am to cover energy demand during typical peak hours.
This mode is particularly useful if you get charged more for your electricity at certain times to utilise the
battery when it is most effective. If the second time slot isn't specified, it will be cleared.</p>
<p>You can optionally also choose to export excess energy: instead of discharging to meet only your home demand,
the battery will discharge at full power and any excess will be exported to the grid. This is useful if you
have a variable export tariff (e.g. Agile export) and you want to target the peak times of day (e.g. 4pm-7pm)
when it is both most expensive to import and most valuable to export energy.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_mode_storage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">slot_1</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">time</span><span class="p">,</span> <span class="n">time</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">16</span><span class="p">),</span> <span class="n">time</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">7</span><span class="p">)),</span> <span class="n">slot_2</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">time</span><span class="p">,</span> <span class="n">time</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">export</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set system to storage mode with specific discharge slots(s).</span>

<span class="sd">    This mode stores excess solar generation during the day and holds that energy ready for use later in the day.</span>
<span class="sd">    By default, the battery will start to discharge from 4pm-7am to cover energy demand during typical peak hours.</span>
<span class="sd">    This mode is particularly useful if you get charged more for your electricity at certain times to utilise the</span>
<span class="sd">    battery when it is most effective. If the second time slot isn&#39;t specified, it will be cleared.</span>

<span class="sd">    You can optionally also choose to export excess energy: instead of discharging to meet only your home demand,</span>
<span class="sd">    the battery will discharge at full power and any excess will be exported to the grid. This is useful if you</span>
<span class="sd">    have a variable export tariff (e.g. Agile export) and you want to target the peak times of day (e.g. 4pm-7pm)</span>
<span class="sd">    when it is both most expensive to import and most valuable to export energy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">export</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_battery_discharge_mode_max_power</span><span class="p">()</span>  <span class="c1"># r27=0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_battery_discharge_mode_demand</span><span class="p">()</span>  <span class="c1"># r27=1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_shallow_charge</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># r110=100</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">enable_discharge</span><span class="p">()</span>  <span class="c1"># r59=1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_discharge_slot_1</span><span class="p">(</span><span class="n">slot_1</span><span class="p">)</span>  <span class="c1"># r56=1600, r57=700</span>
    <span class="k">if</span> <span class="n">slot_2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_discharge_slot_1</span><span class="p">(</span><span class="n">slot_2</span><span class="p">)</span>  <span class="c1"># r56=1600, r57=700</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_discharge_slot_2</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.client.GivEnergyClient.set_shallow_charge" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_shallow_charge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>


<a href="#givenergy_modbus.client.GivEnergyClient.set_shallow_charge" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the minimum level of charge to keep.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/client.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_shallow_charge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the minimum level of charge to keep.&quot;&quot;&quot;</span>
    <span class="c1"># TODO what are valid values? 4-100?</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modbus_client</span><span class="o">.</span><span class="n">write_holding_register</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="o">.</span><span class="n">BATTERY_SOC_RESERVE</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.decoder" class="doc doc-heading">
        <code>decoder</code>



<a href="#givenergy_modbus.decoder" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.decoder.GivEnergyDecoder" class="doc doc-heading">
        <code>GivEnergyDecoder</code>



<a href="#givenergy_modbus.decoder.GivEnergyDecoder" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>GivEnergy Modbus Decoder factory base class.</p>
<p>This is to enable efficient decoding of unencapsulated messages (i.e. having the Modbus-specific framing
stripped) and creating populated matching PDU DTO instances. Two factories are created, dealing with messages
traveling in a particular direction (Request/Client vs. Response/Server) since implementations generally know
what side of the conversation they'll be on. It does allow for more general ideas like being able to decode
arbitrary streams of messages (i.e. captured from a network interface) where these classes may be intermixed.</p>
<p>The Decoder's job is to do the bare minimum inspecting of the raw message to determine its type,
instantiate a concrete PDU handler to decode it, and pass it on.</p>




  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.decoder.GivEnergyDecoder.decode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>


<a href="#givenergy_modbus.decoder.GivEnergyDecoder.decode" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create an appropriately populated PDU message object from a valid Modbus message.</p>
<p>Extracts the <code>function code</code> from the raw message and looks up the matching ModbusPDU handler class
that claims that function. This handler is instantiated and passed the raw message, which then proceeds
to decode its attributes from the bytestream.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/decoder.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusPDU</span> <span class="o">|</span> <span class="n">ErrorResponse</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create an appropriately populated PDU message object from a valid Modbus message.</span>

<span class="sd">    Extracts the `function code` from the raw message and looks up the matching ModbusPDU handler class</span>
<span class="sd">    that claims that function. This handler is instantiated and passed the raw message, which then proceeds</span>
<span class="sd">    to decode its attributes from the bytestream.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">main_fn</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">main_fn</span> <span class="o">==</span> <span class="mh">0x1</span><span class="p">:</span>
        <span class="c1"># heartbeat / error?</span>
        <span class="n">err_response</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">()</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;About to decode data [</span><span class="si">{</span><span class="n">hexlify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
        <span class="n">err_response</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">err_response</span>
    <span class="k">elif</span> <span class="n">main_fn</span> <span class="o">==</span> <span class="mh">0x2</span><span class="p">:</span>
        <span class="c1"># most functions</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">19</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PDU data is too short to find a valid function id: len=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">hexlify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">fn_code</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">19</span><span class="p">]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookupPduClass</span><span class="p">(</span><span class="n">fn_code</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;About to decode data [</span><span class="si">{</span><span class="n">hexlify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">response</span><span class="p">(</span><span class="n">function_code</span><span class="o">=</span><span class="n">fn_code</span><span class="p">)</span>
            <span class="n">r</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">r</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No decoder for function code </span><span class="si">{</span><span class="n">fn_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown main function code </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">main_fn</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># return ExceptionResponse(main_fn, ModbusExceptions.IllegalFunction)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.decoder.GivEnergyDecoder.lookupPduClass" class="doc doc-heading">
<code class="highlight language-python"><span class="n">lookupPduClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_code</span><span class="p">)</span></code>


<a href="#givenergy_modbus.decoder.GivEnergyDecoder.lookupPduClass" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Attempts to find the ModbusPDU handler class that can handle a given function code.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/decoder.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">lookupPduClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_code</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">ModbusPDU</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Attempts to find the ModbusPDU handler class that can handle a given function code.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fn_code</span> <span class="o">&gt;=</span> <span class="mh">0x80</span><span class="p">:</span>
        <span class="n">fn_code</span> <span class="o">&amp;=</span> <span class="mh">0x7F</span>
    <span class="k">if</span> <span class="n">fn_code</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup</span><span class="p">:</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup</span><span class="p">[</span><span class="n">fn_code</span><span class="p">]</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Identified incoming PDU as </span><span class="si">{</span><span class="n">fn_code</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">friendly_class_name</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fn</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.decoder.GivEnergyRequestDecoder" class="doc doc-heading">
        <code>GivEnergyRequestDecoder</code>



<a href="#givenergy_modbus.decoder.GivEnergyRequestDecoder" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Factory class to decode GivEnergy Request PDU messages. Typically used by servers processing inbound requests.</p>



    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.decoder.GivEnergyResponseDecoder" class="doc doc-heading">
        <code>GivEnergyResponseDecoder</code>



<a href="#givenergy_modbus.decoder.GivEnergyResponseDecoder" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Factory class to decode GivEnergy Response PDU messages. Typically used by clients to process responses.</p>



    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.framer" class="doc doc-heading">
        <code>framer</code>



<a href="#givenergy_modbus.framer" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.framer.GivEnergyModbusFramer" class="doc doc-heading">
        <code>GivEnergyModbusFramer</code>



<a href="#givenergy_modbus.framer.GivEnergyModbusFramer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>GivEnergy Modbus Frame controller.</p>
<p>A framer abstracts away all the detail about how marshall the wire
protocol, e.g. to detect if a current message frame exists, decoding
it, sending it, etc.  This implementation understands the
idiosyncrasies of GivEnergy's implementation of the Modbus spec. <strong>Note that
the understanding below comes from observing the wire format and analysing the
data interchanges – no GivEnergy proprietary knowledge was needed or referred to.</strong></p>
<p>Packet exchange looks very similar to normal Modbus TCP on the wire, with each
message still having a regular 7-byte MBAP header consisting of:</p>
<ul>
<li><code>tid</code>, the transaction id</li>
<li><code>pid</code>, the protocol id</li>
<li><code>len</code>, the byte count / length of the remaining data following the header</li>
<li><code>uid</code>, the unit id for addressing devices on the Modbus network</li>
</ul>
<p>This is followed by <code>fid</code> / a function code to specify how the message should be
decoded into a PDU:</p>
<div class="highlight"><pre><span></span><code>[_________MBAP Header______] [_fid_] [_______________data________________]
[_tid_][_pid_][_len_][_uid_]
  2b     2b     2b     1b      1b                  (len-1)b
</code></pre></div>
<p>GivEnergy's implementation quicks can be summarised as:</p>
<ul>
<li><code>tid</code> is always <code>0x5959/'YY'</code>, so the assumption/interpretation is that clients
     have to poll continually instead of maintaining long-lived connections and
     using varying <code>tid</code>s to pair requests with responses</li>
<li><code>pid</code> is always <code>0x0001</code>, whereas normal Modbus uses <code>0x0000</code></li>
<li><code>len</code> <strong>adds</strong> 1 extra byte (anecdotally for the unit id?) which normal
     Modbus does not. This leads to continual off-by-one differences appearing
     whenever header/frame length calculations are done. This is probably the
     biggest reason Modbus libraries struggle working out of the box.</li>
<li><code>unit_id</code> is always <code>0x01</code></li>
<li><code>fid</code> is always <code>0x02/Read Discrete Inputs</code> even for requests that modify
     registers. The actual intended function is encoded 19 bytes into the data
     block. You can interpret this as functionally somewhat akin to Modbus
     sub-functions where we always use the <code>0x02</code> main function.</li>
</ul>
<p>Because these fields are static and we have to reinterpret what <code>len</code> means it is
simpler to just reconsider the entire header:</p>
<div class="highlight"><pre><span></span><code>[___&quot;MBAP+&quot; Header____] [_______________GivEnergy Frame_______________]
[___h1___][_len_][_h2_]
    4b      2b     2b                      (len+2)b
</code></pre></div>
<ul>
<li><code>h1</code> is always <code>0x59590001</code>, so can be used as a sanity check during decoding</li>
<li><code>len</code> needs 2 added during calculations because of the previous extra byte
     off-by-one inconsistency, plus expanding the header by including 1-byte <code>fid</code></li>
<li><code>h2</code> is always <code>0x0102</code>, so can be used as a sanity check during decoding</li>
</ul>
<p>TODO These constant headers being present would allow for us to scan through the
bytestream to try and recover from stream errors and help reset the framing.</p>
<p>The GivEnergy frame itself has a consistent format:</p>
<div class="highlight"><pre><span></span><code>[____serial____] [___pad___] [_addr_] [_func_] [______data______] [_crc_]
      10b            8b         1b       1b            Nb           2b
</code></pre></div>
<ul>
<li><code>serial</code> of the responding data adapter (wifi/GPRS?/ethernet?) plugged into
    the inverter. For requests this is simply hardcoded as a dummy <code>AB1234G567</code></li>
<li><code>pad</code>'s function is unknown - it appears to be a single zero-padded byte that
    varies across responses, so might be some kind of check/crc?</li>
<li><code>addr</code> is the "slave" address, conventionally <code>0x32</code></li>
<li><code>func</code> is the actual function to be executed:<ul>
<li><code>0x3</code> - read holding registers</li>
<li><code>0x4</code> - read input registers</li>
<li><code>0x6</code> - write single register</li>
</ul>
</li>
<li><code>data</code> is specific to the invoked function</li>
<li><code>crc</code> - for requests it is calculated using the function id, base register and
    step count, but it is not clear how those for responses are calculated (or
    should be checked)</li>
</ul>
<p>In short, the message unframing algorithm is simply:</p>
<div class="highlight"><pre><span></span><code><span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">:</span>
  <span class="n">tid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="nb">len</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">fid</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;HHHBB&quot;</span><span class="p">,</span> <span class="n">buffer</span><span class="p">)</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">6</span><span class="o">+</span><span class="nb">len</span><span class="p">]</span>
  <span class="n">process_message</span><span class="p">(</span><span class="n">tid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="nb">len</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
  <span class="n">buffer</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">6</span><span class="o">+</span><span class="nb">len</span><span class="p">:]</span>  <span class="c1"># skip buffer over frame</span>
</code></pre></div>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>InvalidMessageReceivedException</code></td>
        <td><p>When unable to decode an incoming message.</p></td>
      </tr>
      <tr>
        <td><code>ModbusIOException</code></td>
        <td><p>When the identified function decoder fails to decode a message.</p></td>
      </tr>
  </tbody>
</table>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.addToFrame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addToFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.addToFrame" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Add incoming data to the processing buffer.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">addToFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add incoming data to the processing buffer.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span> <span class="o">+=</span> <span class="n">message</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.advanceFrame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">advanceFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.advanceFrame" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Pop the front-most frame from the buffer.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">advanceFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pop the front-most frame from the buffer.&quot;&quot;&quot;</span>
    <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">-</span> <span class="mi">2</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;length </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_length</span><span class="si">}</span><span class="s1"> - 2, len(buffer) = </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="n">length</span><span class="p">:]</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;buffer is now </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.buildPacket" class="doc doc-heading">
<code class="highlight language-python"><span class="n">buildPacket</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.buildPacket" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Creates a finalised GivEnergy Modbus packet from a constant header plus the encoded PDU.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">buildPacket</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">ModbusPDU</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Creates a finalised GivEnergy Modbus packet from a constant header plus the encoded PDU.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FRAME_HEAD</span><span class="p">,</span> <span class="mh">0x5959</span><span class="p">,</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">)</span> <span class="o">+</span> <span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.checkFrame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">checkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.checkFrame" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check and decode the next frame. Returns operation success.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">checkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check and decode the next frame. Returns operation success.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isFrameReady</span><span class="p">():</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Frame header should be ready&#39;</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_data</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Frame header is corrupt, resetting frame&#39;</span><span class="p">)</span>
            <span class="c1"># self.resetFrame()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fcode</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s2">&quot;fcode&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s2">&quot;length&quot;</span><span class="p">]</span>

        <span class="c1"># this short a message should not be possible?</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unexpected short message length </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_length</span><span class="si">}</span><span class="s2">, advancing frame&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">advanceFrame</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># we have at least a complete message, continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Incomplete message: len(buffer)=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span><span class="si">}</span><span class="s1"> &lt; hsize=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span><span class="si">}</span><span class="s1"> + length=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_length</span><span class="si">}</span><span class="s1"> - 2&#39;</span>
        <span class="p">)</span>
    <span class="c1"># we don&#39;t have enough of a message yet, try again later</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Frame is not complete yet, needs more buffer data&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.decode_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">decode_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.decode_data" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Tries to extract the MBAP frame header and performs a few sanity checks.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">decode_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Tries to extract the MBAP frame header and performs a few sanity checks.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span><span class="p">]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isFrameReady</span><span class="p">():</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;extracting MBAP header from [</span><span class="si">{</span><span class="n">hexlify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">] as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">FRAME_HEAD</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">tid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">len_</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">fid</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FRAME_HEAD</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">transaction</span><span class="o">=</span><span class="n">tid</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">pid</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">len_</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">uid</span><span class="p">,</span> <span class="n">fcode</span><span class="o">=</span><span class="n">fid</span><span class="p">)</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;extracted values: </span><span class="si">{</span> <span class="nb">dict</span><span class="p">((</span><span class="n">k</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;0x</span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s1">02x</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">header</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tid</span> <span class="o">!=</span> <span class="mh">0x5959</span> <span class="ow">or</span> <span class="n">pid</span> <span class="o">!=</span> <span class="mh">0x1</span> <span class="ow">or</span> <span class="n">uid</span> <span class="o">!=</span> <span class="mh">0x1</span><span class="p">:</span>  <span class="c1"># or fid != 0x2:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid MBAP header; corruption likely so cowardly refusing to proceed with this frame. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;(0x</span><span class="si">{</span><span class="n">tid</span><span class="si">:</span><span class="s2">04x</span><span class="si">}</span><span class="s2"> 0x</span><span class="si">{</span><span class="n">pid</span><span class="si">:</span><span class="s2">04x</span><span class="si">}</span><span class="s2"> 0x</span><span class="si">{</span><span class="n">uid</span><span class="si">:</span><span class="s2">02x</span><span class="si">}</span><span class="s2"> != 0x5959 0x0001 0x01)&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">header</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.getFrame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.getFrame" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Extract the next PDU frame from the buffer, discarding the leading MBAP header.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">getFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract the next PDU frame from the buffer, discarding the leading MBAP header.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.getRawFrame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getRawFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.getRawFrame" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Returns the complete buffer.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">getRawFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the complete buffer.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.isFrameReady" class="doc doc-heading">
<code class="highlight language-python"><span class="n">isFrameReady</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.isFrameReady" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check if we have enough data in the buffer to read at least a frame header.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">isFrameReady</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if we have enough data in the buffer to read at least a frame header.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hsize</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.populateResult" class="doc doc-heading">
<code class="highlight language-python"><span class="n">populateResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.populateResult" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Populates the Modbus PDU object's metadata attributes from the decoded MBAP headers.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">populateResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">ModbusPDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Populates the Modbus PDU object&#39;s metadata attributes from the decoded MBAP headers.&quot;&quot;&quot;</span>
    <span class="c1"># no-op, there&#39;s nothing interesting in there</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.processIncomingPacket" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processIncomingPacket</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.processIncomingPacket" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Process an incoming packet.</p>
<p>This takes in a bytestream from the underlying transport and adds it to the
frame buffer. It then repeatedly attempts to perform framing on the buffer
by checking for a viable message at the head of the buffer, and if found pops
off the expected length of the raw frame for processing.</p>
<p>Returns when the buffer is too short to contain any more viable messages. This
handles cases where multiple and/or partial messages arrive due to fragmentation
or buffering on the underlying transport - these partial messages will try to
be completed eventually as more data subsequently arrives and gets handled here.</p>
<p>If decoding and processing succeeds for a message, the instantiated PDU DTO is
handed to the supplied callback function for onward processing and dispatching.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>bytes</code></td>
        <td><p>Data from underlying transport.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>callback</code></td>
        <td><code>Callable</code></td>
        <td><p>Processor to receive newly-decoded PDUs.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">processIncomingPacket</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Process an incoming packet.</span>

<span class="sd">    This takes in a bytestream from the underlying transport and adds it to the</span>
<span class="sd">    frame buffer. It then repeatedly attempts to perform framing on the buffer</span>
<span class="sd">    by checking for a viable message at the head of the buffer, and if found pops</span>
<span class="sd">    off the expected length of the raw frame for processing.</span>

<span class="sd">    Returns when the buffer is too short to contain any more viable messages. This</span>
<span class="sd">    handles cases where multiple and/or partial messages arrive due to fragmentation</span>
<span class="sd">    or buffering on the underlying transport - these partial messages will try to</span>
<span class="sd">    be completed eventually as more data subsequently arrives and gets handled here.</span>

<span class="sd">    If decoding and processing succeeds for a message, the instantiated PDU DTO is</span>
<span class="sd">    handed to the supplied callback function for onward processing and dispatching.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: Data from underlying transport.</span>
<span class="sd">        callback: Processor to receive newly-decoded PDUs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Incoming </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s1"> bytes: </span><span class="si">{</span><span class="n">hexlify_packets</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addToFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isFrameReady</span><span class="p">():</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;No more frames waiting, exiting&#39;</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkFrame</span><span class="p">():</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Frame check failed, dropping and resetting!!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetFrame</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Hand off to _process&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.framer.GivEnergyModbusFramer.resetFrame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resetFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.framer.GivEnergyModbusFramer.resetFrame" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Reset the entire message buffer.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/framer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">resetFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reset the entire message buffer.&quot;&quot;&quot;</span>
    <span class="c1"># try to mitigate corruption: if we can find the start of another MBAP header truncate the buffer</span>
    <span class="c1"># only up to that point</span>
    <span class="n">header_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x59\x59\x00\x01</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">header_offset</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Found another MBAP header at offset </span><span class="si">{</span><span class="n">header_offset</span><span class="si">}</span><span class="s1"> in buffer </span><span class="si">{</span><span class="n">hexlify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span><span class="si">}</span><span class="s1">, &#39;</span>
            <span class="s1">&#39;attempting recovery.&#39;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="n">header_offset</span><span class="p">:]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.modbus" class="doc doc-heading">
        <code>modbus</code>



<a href="#givenergy_modbus.modbus" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.modbus.GivEnergyModbusTcpClient" class="doc doc-heading">
        <code>GivEnergyModbusTcpClient</code>



<a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>GivEnergy Modbus Client implementation.</p>
<p>This class ties together all the pieces to create a functional client that can converse with a
GivEnergy Modbus implementation over TCP. It exists as a thin wrapper around the ModbusTcpClient
to hot patch in our own Framer and TransactionManager since they are hardcoded classes for Decoder
and TransactionManager throughout constructors up the call chain.</p>
<p>We also provide a few convenience methods to read and write registers.</p>




  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.modbus.GivEnergyModbusTcpClient.execute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.execute" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Send the given PDU to the remote device and return any PDU returned in response.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/modbus.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ModbusPDU</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusPDU</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Send the given PDU to the remote device and return any PDU returned in response.&quot;&quot;&quot;</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Sending request </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">ModbusIOException</span><span class="p">):</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">except</span> <span class="n">ModbusIOException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># This seems to help with inverters becoming unresponsive from the portal.&quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_holding_registers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_holding_registers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_holding_registers" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Convenience method to help read out holding registers.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/modbus.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_holding_registers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Convenience method to help read out holding registers.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_registers</span><span class="p">(</span><span class="n">HoldingRegister</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_input_registers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_input_registers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_input_registers" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Convenience method to help read out input registers.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/modbus.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_input_registers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Convenience method to help read out input registers.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_registers</span><span class="p">(</span><span class="n">InputRegister</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_registers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_registers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">base_address</span><span class="p">,</span> <span class="n">register_count</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.read_registers" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Read out registers from the correct location depending on type specified.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/modbus.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_registers</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">kind</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">HoldingRegister</span> <span class="o">|</span> <span class="n">InputRegister</span><span class="p">],</span> <span class="n">base_address</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">register_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Read out registers from the correct location depending on type specified.&quot;&quot;&quot;</span>
    <span class="c1"># match types of register to their request/response types</span>
    <span class="n">t_req</span><span class="p">,</span> <span class="n">t_res</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">HoldingRegister</span><span class="p">:</span> <span class="p">(</span><span class="n">ReadHoldingRegistersRequest</span><span class="p">,</span> <span class="n">ReadHoldingRegistersResponse</span><span class="p">),</span>
        <span class="n">InputRegister</span><span class="p">:</span> <span class="p">(</span><span class="n">ReadInputRegistersRequest</span><span class="p">,</span> <span class="n">ReadInputRegistersResponse</span><span class="p">),</span>
    <span class="p">}[</span><span class="n">kind</span><span class="p">]</span>

    <span class="n">request</span> <span class="o">=</span> <span class="n">t_req</span><span class="p">(</span><span class="n">base_register</span><span class="o">=</span><span class="n">base_address</span><span class="p">,</span> <span class="n">register_count</span><span class="o">=</span><span class="n">register_count</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;Attempting to read </span><span class="si">{</span><span class="n">t_req</span><span class="si">}</span><span class="s1">s #</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">base_register</span><span class="si">}</span><span class="s1">-&#39;</span>
        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">base_register</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">register_count</span><span class="si">}</span><span class="s1"> from device </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">slave_address</span><span class="p">)</span><span class="si">}</span><span class="s1">...&#39;</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">t_res</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">base_register</span> <span class="o">!=</span> <span class="n">base_address</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Returned base register (</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">base_register</span><span class="si">}</span><span class="s1">) &#39;</span>
                <span class="sa">f</span><span class="s1">&#39;does not match that from request (</span><span class="si">{</span><span class="n">base_address</span><span class="si">}</span><span class="s1">).&#39;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">register_count</span> <span class="o">!=</span> <span class="n">register_count</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Returned register count (</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">register_count</span><span class="si">}</span><span class="s1">) &#39;</span>
                <span class="sa">f</span><span class="s1">&#39;does not match that from request (</span><span class="si">{</span><span class="n">register_count</span><span class="si">}</span><span class="s1">).&#39;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Did not receive expected response type: </span><span class="si">{</span><span class="n">t_res</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> != </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="c1"># FIXME this contract needs improving</span>
    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.modbus.GivEnergyModbusTcpClient.write_holding_register" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_holding_register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#givenergy_modbus.modbus.GivEnergyModbusTcpClient.write_holding_register" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Write a value to a single holding register.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/modbus.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_holding_register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register</span><span class="p">:</span> <span class="n">HoldingRegister</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Write a value to a single holding register.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">register</span><span class="o">.</span><span class="n">write_safe</span><span class="p">:</span>  <span class="c1"># type: ignore  # shut up mypy</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Register </span><span class="si">{</span><span class="n">register</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> is not safe to write to&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="mh">0xFFFF</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Value </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1"> must fit in 2 bytes&#39;</span><span class="p">)</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Attempting to write </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s1"> to Holding Register </span><span class="si">{</span><span class="n">register</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">register</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">WriteHoldingRegisterRequest</span><span class="p">(</span><span class="n">register</span><span class="o">=</span><span class="n">register</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">WriteHoldingRegisterResponse</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Register read-back value 0x</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="si">:</span><span class="s1">04x</span><span class="si">}</span><span class="s1"> != written value 0x</span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s1">04x</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unexpected response from remote end: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.model" class="doc doc-heading">
        <code>model</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#givenergy_modbus.model" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Data model.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.model.GivEnergyBaseModel" class="doc doc-heading">
        <code>GivEnergyBaseModel</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#givenergy_modbus.model.GivEnergyBaseModel" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Structured format for all other attributes.</p>




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.GivEnergyBaseModel.Config" class="doc doc-heading">
        <code>Config</code>



<a href="#givenergy_modbus.model.GivEnergyBaseModel.Config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">





  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h5 id="givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict" class="doc doc-heading">
        <code>getter_dict</code>



<a href="#givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>GetterDict implementation to consolidate register data structures.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#givenergy_modbus.model.GivEnergyBaseModel.Config.getter_dict.get" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Getter that computes some virtual attributes.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Getter that computes some virtual attributes.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;inverter_serial_number&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_1_2&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_3_4&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_5_6&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_7_8&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_9_10&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;num_mppt&quot;</span><span class="p">,</span> <span class="s1">&#39;num_phases&#39;</span><span class="p">]:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;num_mppt_and_num_phases&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;num_mppt&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;battery_serial_number&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_1_2&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_3_4&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_5_6&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_7_8&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_9_10&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;first_battery_serial_number&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_1_2&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_3_4&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_5_6&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_7_8&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_9_10&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="c1"># Some special cases first</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;system_time&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_year&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_month&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_day&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_hour&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_minute&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_second&#39;</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;charge_slot_1&#39;</span><span class="p">,</span> <span class="s1">&#39;charge_slot_2&#39;</span><span class="p">,</span> <span class="s1">&#39;discharge_slot_1&#39;</span><span class="p">,</span> <span class="s1">&#39;discharge_slot_2&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">_start&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">_end&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;inverter_firmware_version&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;D0.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dsp_firmware_version&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">-A0.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arm_firmware_version&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>

    <span class="c1"># if key == &#39;modbus_version&#39;:</span>
    <span class="c1">#     return f&#39;{self.get(&quot;modbus_version&quot;):0.2f}&#39;</span>

    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>








  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="givenergy_modbus.model.battery" class="doc doc-heading">
        <code>battery</code>



<a href="#givenergy_modbus.model.battery" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.battery.Battery" class="doc doc-heading">
        <code>Battery</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#givenergy_modbus.model.battery.Battery" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Structured format for all inverter attributes.</p>




  <div class="doc doc-children">























































  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="givenergy_modbus.model.inverter" class="doc doc-heading">
        <code>inverter</code>



<a href="#givenergy_modbus.model.inverter" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.inverter.Inverter" class="doc doc-heading">
        <code>Inverter</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#givenergy_modbus.model.inverter.Inverter" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Structured format for all inverter attributes.</p>




  <div class="doc doc-children">
































































































































































  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.inverter.Inverter.compute_firmware_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_firmware_version</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#givenergy_modbus.model.inverter.Inverter.compute_firmware_version" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Virtual method to inject a firmware version similar to what the dashboard shows.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/inverter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span>
<span class="k">def</span> <span class="nf">compute_firmware_version</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Virtual method to inject a firmware version similar to what the dashboard shows.&quot;&quot;&quot;</span>
    <span class="n">values</span><span class="p">[</span><span class="s1">&#39;firmware_version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;D0.</span><span class="si">{</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;dsp_firmware_version&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">-A0.</span><span class="si">{</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;arm_firmware_version&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.inverter.Inverter.compute_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_model</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#givenergy_modbus.model.inverter.Inverter.compute_model" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Computes the inverter model from the serial number prefix.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/inverter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span>
<span class="k">def</span> <span class="nf">compute_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Computes the inverter model from the serial number prefix.&quot;&quot;&quot;</span>
    <span class="n">values</span><span class="p">[</span><span class="s1">&#39;inverter_model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">from_serial_number</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;inverter_serial_number&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.inverter.Model" class="doc doc-heading">
        <code>Model</code>



<a href="#givenergy_modbus.model.inverter.Model" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Known models of inverters.</p>




  <div class="doc doc-children">














  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.inverter.UnknownModelError" class="doc doc-heading">
        <code>UnknownModelError</code>



<a href="#givenergy_modbus.model.inverter.UnknownModelError" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Raised when encountering an unknown model.</p>



    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="givenergy_modbus.model.plant" class="doc doc-heading">
        <code>plant</code>



<a href="#givenergy_modbus.model.plant" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.plant.Plant" class="doc doc-heading">
        <code>Plant</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#givenergy_modbus.model.plant.Plant" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Representation of a complete GivEnergy plant.</p>




  <div class="doc doc-children">















  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.plant.Plant.refresh" class="doc doc-heading">
<code class="highlight language-python"><span class="n">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.model.plant.Plant.refresh" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Refresh the represented models from internal caches.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/plant.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Refresh the represented models from internal caches.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inverter</span> <span class="o">=</span> <span class="n">Inverter</span><span class="o">.</span><span class="n">from_orm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_inverter_rc</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">batteries</span> <span class="o">=</span> <span class="p">[</span><span class="n">Battery</span><span class="o">.</span><span class="n">from_orm</span><span class="p">(</span><span class="n">rc</span><span class="p">)</span> <span class="k">for</span> <span class="n">rc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batteries_rcs</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="givenergy_modbus.model.register" class="doc doc-heading">
        <code>register</code>



<a href="#givenergy_modbus.model.register" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register.HoldingRegister" class="doc doc-heading">
        <code>HoldingRegister</code>



<a href="#givenergy_modbus.model.register.HoldingRegister" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Holding Register definitions.</p>




  <div class="doc doc-children">





















































































































































































































  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register.InputRegister" class="doc doc-heading">
        <code>InputRegister</code>



<a href="#givenergy_modbus.model.register.InputRegister" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Definitions of what registers in the Input Bank represent.</p>




  <div class="doc doc-children">

























































































































































































































































































































  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register.Register" class="doc doc-heading">
        <code>Register</code>



<a href="#givenergy_modbus.model.register.Register" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Mixin to help easier access to register bank structures.</p>



    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register.Scaling" class="doc doc-heading">
        <code>Scaling</code>



<a href="#givenergy_modbus.model.register.Scaling" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>What scaling factor needs to be applied to a register's value.</p>
<p>Specified as a divisor instead, because python deals with rounding precision better that way.</p>




  <div class="doc doc-children">















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register.Type" class="doc doc-heading">
        <code>Type</code>



<a href="#givenergy_modbus.model.register.Type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Type of data register represents. Encoding is always big-endian.</p>




  <div class="doc doc-children">
























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register.Unit" class="doc doc-heading">
        <code>Unit</code>



<a href="#givenergy_modbus.model.register.Unit" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Measurement unit for the register value.</p>




  <div class="doc doc-children">

























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="givenergy_modbus.model.register_cache" class="doc doc-heading">
        <code>register_cache</code>



<a href="#givenergy_modbus.model.register_cache" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register_cache.RegisterCache" class="doc doc-heading">
        <code>RegisterCache</code>



<a href="#givenergy_modbus.model.register_cache.RegisterCache" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Holds a cache of Registers populated after querying a device.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.register_cache.RegisterCache.__getattr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#givenergy_modbus.model.register_cache.RegisterCache.__getattr__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Magic attributes that try to look up and convert register values.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/register_cache.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Magic attributes that try to look up and convert register values.&quot;&quot;&quot;</span>
    <span class="n">item_upper</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">item_upper</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_lookup_table</span><span class="p">:</span>
        <span class="n">register</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_lookup_table</span><span class="p">[</span><span class="n">item_upper</span><span class="p">]</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registers</span><span class="p">[</span><span class="n">register</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">register</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">item_upper</span> <span class="o">+</span> <span class="s1">&#39;_H&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_lookup_table</span> <span class="ow">and</span> <span class="n">item_upper</span> <span class="o">+</span> <span class="s1">&#39;_L&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_lookup_table</span><span class="p">:</span>
        <span class="n">register_h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_lookup_table</span><span class="p">[</span><span class="n">item_upper</span> <span class="o">+</span> <span class="s1">&#39;_H&#39;</span><span class="p">]</span>
        <span class="n">register_l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_lookup_table</span><span class="p">[</span><span class="n">item_upper</span> <span class="o">+</span> <span class="s1">&#39;_L&#39;</span><span class="p">]</span>
        <span class="n">val_h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registers</span><span class="p">[</span><span class="n">register_h</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span>
        <span class="n">val_l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registers</span><span class="p">[</span><span class="n">register_l</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">register_l</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">val_h</span> <span class="o">+</span> <span class="n">val_l</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.register_cache.RegisterCache.debug" class="doc doc-heading">
<code class="highlight language-python"><span class="n">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.model.register_cache.RegisterCache.debug" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Dump the internal state of registers and their value representations.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/register_cache.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Dump the internal state of registers and their value representations.&quot;&quot;&quot;</span>
    <span class="n">class_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">class_name</span> <span class="o">!=</span> <span class="n">r</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span>
            <span class="n">class_name</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;### &#39;</span> <span class="o">+</span> <span class="n">class_name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;#&#39;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s1">&gt;35</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">repr</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">:</span><span class="s1">20</span><span class="si">}</span><span class="s1">  |  &#39;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s1">15</span><span class="si">}</span><span class="s1">  </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">scaling</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s1">5</span><span class="si">}</span><span class="s1">  0x</span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s1">04x</span><span class="si">}</span><span class="s1">  </span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s1">10</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.register_cache.RegisterCache.from_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#givenergy_modbus.model.register_cache.RegisterCache.from_json" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Instantiate a RegisterCache from its JSON form.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/register_cache.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegisterCache</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Instantiate a RegisterCache from its JSON form.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">register_object_hook</span><span class="p">(</span><span class="n">object_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Register</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Rewrite the parsed object to have Register instances as keys instead of their (string) repr.&quot;&quot;&quot;</span>
        <span class="n">lookup</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;HR&#39;</span><span class="p">:</span> <span class="n">HoldingRegister</span><span class="p">,</span> <span class="s1">&#39;IR&#39;</span><span class="p">:</span> <span class="n">InputRegister</span><span class="p">}</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">object_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">reg</span><span class="p">,</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ret</span><span class="p">[</span><span class="n">lookup</span><span class="p">[</span><span class="n">reg</span><span class="p">](</span><span class="nb">int</span><span class="p">(</span><span class="n">idx</span><span class="p">))]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">registers</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="n">register_object_hook</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.register_cache.RegisterCache.set_registers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_registers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">,</span> <span class="n">registers</span><span class="p">)</span></code>


<a href="#givenergy_modbus.model.register_cache.RegisterCache.set_registers" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Update internal holding register cache with given values.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/register_cache.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_registers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">Register</span><span class="p">],</span> <span class="n">registers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Update internal holding register cache with given values.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">registers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registers</span><span class="p">[</span><span class="n">type_</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span> <span class="o">=</span> <span class="n">v</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.register_cache.RegisterCache.to_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.model.register_cache.RegisterCache.to_json" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return JSON representation of the register cache, suitable for using with <code>from_json()</code>.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/register_cache.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return JSON representation of the register cache, suitable for using with `from_json()`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_registers</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="givenergy_modbus.model.register_getter" class="doc doc-heading">
        <code>register_getter</code>



<a href="#givenergy_modbus.model.register_getter" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="givenergy_modbus.model.register_getter.RegisterGetter" class="doc doc-heading">
        <code>RegisterGetter</code>



<a href="#givenergy_modbus.model.register_getter.RegisterGetter" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>GetterDict implementation to consolidate register data structures.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="givenergy_modbus.model.register_getter.RegisterGetter.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#givenergy_modbus.model.register_getter.RegisterGetter.get" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Getter that computes some virtual attributes.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/model/register_getter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Getter that computes some virtual attributes.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;inverter_serial_number&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_1_2&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_3_4&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_5_6&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_7_8&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number_9_10&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;num_mppt&quot;</span><span class="p">,</span> <span class="s1">&#39;num_phases&#39;</span><span class="p">]:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;num_mppt_and_num_phases&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;num_mppt&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;battery_serial_number&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_1_2&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_3_4&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_5_6&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_7_8&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;battery_serial_number_9_10&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;first_battery_serial_number&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_1_2&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_3_4&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_5_6&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_7_8&#39;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;first_battery_serial_number_9_10&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="c1"># Some special cases first</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;system_time&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_year&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_month&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_day&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_hour&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_minute&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;system_time_second&#39;</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;charge_slot_1&#39;</span><span class="p">,</span> <span class="s1">&#39;charge_slot_2&#39;</span><span class="p">,</span> <span class="s1">&#39;discharge_slot_1&#39;</span><span class="p">,</span> <span class="s1">&#39;discharge_slot_2&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">_start&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">_end&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;inverter_firmware_version&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;D0.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dsp_firmware_version&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">-A0.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arm_firmware_version&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>

    <span class="c1"># if key == &#39;modbus_version&#39;:</span>
    <span class="c1">#     return f&#39;{self.get(&quot;modbus_version&quot;):0.2f}&#39;</span>

    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.pdu" class="doc doc-heading">
        <code>pdu</code>



<a href="#givenergy_modbus.pdu" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p><code>pymodbus.pdu.ModbusPDU</code> implementations for GivEnergy-specific PDU messages.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ErrorResponse" class="doc doc-heading">
        <code>ErrorResponse</code>



<a href="#givenergy_modbus.pdu.ErrorResponse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Special case PDU that gets returned under some error conditions.</p>




  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ErrorResponse.decode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ErrorResponse.decode" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Decode response PDU message and populate instance attributes.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Decode response PDU message and populate instance attributes.&quot;&quot;&quot;</span>
    <span class="n">decoder</span> <span class="o">=</span> <span class="n">BinaryPayloadDecoder</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="n">Endian</span><span class="o">.</span><span class="n">Big</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_adapter_serial_number</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode_string</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">error_code</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode_8bit_uint</span><span class="p">()</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully decoded </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ErrorResponse.encode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ErrorResponse.encode" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Encode request PDU message and populate instance attributes.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Encode request PDU message and populate instance attributes.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="n">BinaryPayloadBuilder</span><span class="p">(</span><span class="n">byteorder</span><span class="o">=</span><span class="n">Endian</span><span class="o">.</span><span class="n">Big</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">add_string</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_adapter_serial_number</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span><span class="si">:</span><span class="s2">*&gt;10</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># ensure exactly 10 bytes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">add_8bit_uint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_code</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ErrorResponse.get_response_pdu_size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_response_pdu_size</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#givenergy_modbus.pdu.ErrorResponse.get_response_pdu_size" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Predict the size of the response PDU.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_response_pdu_size</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Predict the size of the response PDU.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">11</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ModbusPDU" class="doc doc-heading">
        <code>ModbusPDU</code>



<a href="#givenergy_modbus.pdu.ModbusPDU" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Base of the PDU handler tree. Defines the most common shared attributes and code.</p>




  <div class="doc doc-children">
















  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ModbusPDU.decode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ModbusPDU.decode" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Decode PDU message and populate instance attributes.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Decode PDU message and populate instance attributes.&quot;&quot;&quot;</span>
    <span class="n">decoder</span> <span class="o">=</span> <span class="n">BinaryPayloadDecoder</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="n">Endian</span><span class="o">.</span><span class="n">Big</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_adapter_serial_number</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode_string</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode_64bit_uint</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slave_address</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode_8bit_uint</span><span class="p">()</span>
    <span class="n">function_code</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode_8bit_uint</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">function_code</span> <span class="o">&gt;=</span> <span class="mh">0x80</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">function_code</span> <span class="o">=</span> <span class="n">function_code</span> <span class="o">&amp;</span> <span class="mh">0x7F</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">function_code</span> <span class="o">!=</span> <span class="n">function_code</span><span class="p">:</span>
        <span class="n">e</span> <span class="o">=</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Expected function code 0x</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">function_code</span><span class="si">:</span><span class="s2">02x</span><span class="si">}</span><span class="s2">, found 0x</span><span class="si">{</span><span class="n">function_code</span><span class="si">:</span><span class="s2">02x</span><span class="si">}</span><span class="s2"> instead.&quot;</span><span class="p">,</span> <span class="bp">self</span>
        <span class="p">)</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_decode_function_data</span><span class="p">(</span><span class="n">decoder</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_valid_state</span><span class="p">()</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully decoded </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ModbusPDU.encode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ModbusPDU.encode" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Encode PDU message from instance attributes.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Encode PDU message from instance attributes.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_valid_state</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="n">BinaryPayloadBuilder</span><span class="p">(</span><span class="n">byteorder</span><span class="o">=</span><span class="n">Endian</span><span class="o">.</span><span class="n">Big</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">add_string</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_adapter_serial_number</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span><span class="si">:</span><span class="s2">*&gt;10</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># ensure exactly 10 bytes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">add_64bit_uint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">add_8bit_uint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slave_address</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">add_8bit_uint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">function_code</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_encode_function_data</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_update_check_code</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ModbusPDU.execute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ModbusPDU.execute" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Called to create the Response PDU after an incoming message has been completely processed.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">IModbusSlaveContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusPDU</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Called to create the Response PDU after an incoming message has been completely processed.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ModbusPDU.get_response_pdu_size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_response_pdu_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ModbusPDU.get_response_pdu_size" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Allows the framer to decapsulate the PDU properly from the MBAP frame header.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_response_pdu_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Allows the framer to decapsulate the PDU properly from the MBAP frame header.&quot;&quot;&quot;</span>
    <span class="c1"># 20 = 10 (data adapter serial) + 8 (padding) + 1 (slave addr) + 1 (function code)</span>
    <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_function_data_size</span><span class="p">()</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculated </span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2"> bytes total response PDU size for </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">247</span><span class="p">:</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Expected response size </span><span class="si">{size}</span><span class="s1">b exceeds Modbus protocol spec&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">size</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ModbusRequest" class="doc doc-heading">
        <code>ModbusRequest</code>



<a href="#givenergy_modbus.pdu.ModbusRequest" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Root of the hierarchy for Request PDUs.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ModbusRequest.execute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ModbusRequest.execute" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Hook that allows a Response PDU to be created from the same context where the Request was handled.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>context</code></td>
        <td><code>IModbusSlaveContext</code></td>
        <td><p>A datastore context that should be able to provide the values to populate the Response with.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">IModbusSlaveContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Hook that allows a Response PDU to be created from the same context where the Request was handled.</span>

<span class="sd">    Args:</span>
<span class="sd">        context: A datastore context that should be able to provide the values to populate the Response with.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># if not (1 &lt;= self.register_count &lt;= 0x7D0):</span>
    <span class="c1">#     return self.doException(ModbusExceptions.IllegalValue)</span>
    <span class="c1"># if not context.validate(self.function_code, self.base_register, self.register_count):</span>
    <span class="c1">#     return self.doException(ModbusExceptions.IllegalAddress)</span>
    <span class="c1"># values = context.getValues(self.function_code, self.address, self.count)</span>
    <span class="c1"># return ReadRegistersResponse(values)  # echo back some values from the Request in the Response</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ModbusResponse" class="doc doc-heading">
        <code>ModbusResponse</code>



<a href="#givenergy_modbus.pdu.ModbusResponse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Root of the hierarchy for Response PDUs.</p>




  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ModbusResponse.execute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ModbusResponse.execute" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>There is no automatic Reply following the processing of a Response.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusPDU</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;There is no automatic Reply following the processing of a Response.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadHoldingRegistersMeta" class="doc doc-heading">
        <code>ReadHoldingRegistersMeta</code>



<a href="#givenergy_modbus.pdu.ReadHoldingRegistersMeta" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Request &amp; Response PDUs for function #3/Read Holding Registers.</p>




  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadHoldingRegistersRequest" class="doc doc-heading">
        <code>ReadHoldingRegistersRequest</code>



<a href="#givenergy_modbus.pdu.ReadHoldingRegistersRequest" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Concrete PDU implementation for handling function #3/Read Holding Registers request messages.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ReadHoldingRegistersRequest.execute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ReadHoldingRegistersRequest.execute" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>FIXME if we ever implement a server.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;FIXME if we ever implement a server.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadHoldingRegistersResponse" class="doc doc-heading">
        <code>ReadHoldingRegistersResponse</code>



<a href="#givenergy_modbus.pdu.ReadHoldingRegistersResponse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Concrete PDU implementation for handling function #3/Read Holding Registers response messages.</p>



    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadInputRegistersMeta" class="doc doc-heading">
        <code>ReadInputRegistersMeta</code>



<a href="#givenergy_modbus.pdu.ReadInputRegistersMeta" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Request &amp; Response PDUs for function #4/Read Input Registers.</p>




  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadInputRegistersRequest" class="doc doc-heading">
        <code>ReadInputRegistersRequest</code>



<a href="#givenergy_modbus.pdu.ReadInputRegistersRequest" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Concrete PDU implementation for handling function #4/Read Input Registers request messages.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ReadInputRegistersRequest.execute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ReadInputRegistersRequest.execute" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>FIXME if we ever implement a server.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;FIXME if we ever implement a server.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadInputRegistersResponse" class="doc doc-heading">
        <code>ReadInputRegistersResponse</code>



<a href="#givenergy_modbus.pdu.ReadInputRegistersResponse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Concrete PDU implementation for handling function #4/Read Input Registers response messages.</p>



    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadRegistersRequest" class="doc doc-heading">
        <code>ReadRegistersRequest</code>



<a href="#givenergy_modbus.pdu.ReadRegistersRequest" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Handles all messages that request a range of registers.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ReadRegistersRequest.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#givenergy_modbus.pdu.ReadRegistersRequest.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Proxy to the lower level initializer </p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_register</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;base_register&#39;</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">register_count</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;register_count&#39;</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.ReadRegistersResponse" class="doc doc-heading">
        <code>ReadRegistersResponse</code>



<a href="#givenergy_modbus.pdu.ReadRegistersResponse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Handles all messages that respond with a range of registers.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ReadRegistersResponse.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#givenergy_modbus.pdu.ReadRegistersResponse.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Proxy to the lower level initializer </p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inverter_serial_number</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inverter_serial_number&#39;</span><span class="p">,</span> <span class="s1">&#39;SA1234G567&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_register</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;base_register&#39;</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">register_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;register_count&#39;</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">register_values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;register_values&#39;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_values</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Expected to receive </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">register_count</span><span class="si">}</span><span class="s1"> register values, &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;instead received </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_values</span><span class="p">)</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># self.check: int = kwargs.get(&#39;check&#39;, 0x0000)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.pdu.ReadRegistersResponse.to_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#givenergy_modbus.pdu.ReadRegistersResponse.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the registers as a dict of register_index:value. Accounts for base_register offsets.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/pdu.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the registers as a dict of register_index:value. Accounts for base_register offsets.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_values</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">base_register</span><span class="p">)}</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.WriteHoldingRegisterMeta" class="doc doc-heading">
        <code>WriteHoldingRegisterMeta</code>



<a href="#givenergy_modbus.pdu.WriteHoldingRegisterMeta" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Request &amp; Response PDUs for function #6/Write Holding Register.</p>




  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.WriteHoldingRegisterRequest" class="doc doc-heading">
        <code>WriteHoldingRegisterRequest</code>



<a href="#givenergy_modbus.pdu.WriteHoldingRegisterRequest" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Concrete PDU implementation for handling function #6/Write Holding Register request messages.</p>




  <div class="doc doc-children">













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.pdu.WriteHoldingRegisterResponse" class="doc doc-heading">
        <code>WriteHoldingRegisterResponse</code>



<a href="#givenergy_modbus.pdu.WriteHoldingRegisterResponse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Concrete PDU implementation for handling function #6/Write Holding Register response messages.</p>




  <div class="doc doc-children">












  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.transaction" class="doc doc-heading">
        <code>transaction</code>



<a href="#givenergy_modbus.transaction" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.transaction.GivEnergyTransactionManager" class="doc doc-heading">
        <code>GivEnergyTransactionManager</code>



<a href="#givenergy_modbus.transaction.GivEnergyTransactionManager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Implements a ModbusTransactionManager.</p>
<p>The only reason this exists is to be able to specify the ADU size for automated response frame processing
since the socket needs to know how many bytes to expect in response to a given Request. See
<code>ModbusTransactionManager::execute</code> where it checks whether the framer is an instance of
<code>ModbusSocketFramer</code> to inform the expected response length, and even lower down the call chain
in <code>ModbusTransactionManager::_recv</code> where there's more byte calculations based on the TransactionManager's
provenance.</p>
<p>We could've extended <code>GivEnergyModbusFramer</code> from <code>ModbusSocketFramer</code> instead, but that brings a different set
of problems around implementation divergence in the GivEnergy implementation that would probably have been
more work instead. Full novel in the <code>GivEnergyModbusFramer</code> class description.</p>




  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.transaction.GivEnergyTransactionManager.execute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#givenergy_modbus.transaction.GivEnergyTransactionManager.execute" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Main processing loop.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/transaction.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ModbusPDU</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModbusPDU</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Main processing loop.&quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Old implementation returned: execute(request)=</span><span class="si">{</span><span class="n">res</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="givenergy_modbus.util" class="doc doc-heading">
        <code>util</code>



<a href="#givenergy_modbus.util" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="givenergy_modbus.util.InterceptHandler" class="doc doc-heading">
        <code>InterceptHandler</code>



<a href="#givenergy_modbus.util.InterceptHandler" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Install loguru by intercepting logging.</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="givenergy_modbus.util.InterceptHandler.emit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span></code>


<a href="#givenergy_modbus.util.InterceptHandler.emit" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Redirect logging emissions to loguru instead.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/util.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Redirect logging emissions to loguru instead.&quot;&quot;&quot;</span>
    <span class="c1"># Get corresponding Loguru level if it exists</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">level</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span>

    <span class="c1"># Find caller from where originated the logged message</span>
    <span class="n">frame</span><span class="p">,</span> <span class="n">depth</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">currentframe</span><span class="p">(),</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_filename</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="vm">__file__</span><span class="p">:</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_back</span>
        <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">opt</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">record</span><span class="o">.</span><span class="n">exc_info</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">getMessage</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 id="givenergy_modbus.util.friendly_class_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">friendly_class_name</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></code>


<a href="#givenergy_modbus.util.friendly_class_name" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Provides an easy way to only show the class name.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/util.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">friendly_class_name</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Provides an easy way to only show the class name.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)[</span><span class="mi">8</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">friendly_class_name</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>  <span class="c1"># + f&#39;({vars(c)})&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="givenergy_modbus.util.hexlify" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hexlify</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>


<a href="#givenergy_modbus.util.hexlify" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Provides an easy way to print long byte strings as hex strings.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/util.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">hexlify</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Provides an easy way to print long byte strings as hex strings.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">((</span><span class="n">val</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;big&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
            <span class="c1"># TODO remove once 3.7 is unsupported</span>
            <span class="k">return</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">bytes_per_sep</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="givenergy_modbus.util.hexxed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hexxed</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>


<a href="#givenergy_modbus.util.hexxed" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Provides an easy way to print hex values when you might not always have ints.</p>

        <details class="quote">
          <summary>Source code in <code>givenergy_modbus/util.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">hexxed</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Provides an easy way to print hex values when you might not always have ints.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;0x</span><span class="si">{</span><span class="n">val</span><span class="si">:</span><span class="s1">04x</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="n">val</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../usage/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Usage
              </div>
            </div>
          </a>
        
        
          <a href="../contributing/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Contributing
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://github.com/waynerv/cookiecutter-pypackage" target="_blank" rel="noopener" title="Tweet" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
      <a href="https://github.com/waynerv/cookiecutter-pypackage" target="_blank" rel="noopener" title="Facebook" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
      </a>
    
      
      
      <a href="https://github.com/dewet22/givenergy-modbus" target="_blank" rel="noopener" title="Github" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
      <a href="mailto:givenergy-modbus@dewet.org" target="_blank" rel="noopener" title="" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 8l-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['navigation.indexes', 'navigation.instant', 'navigation.tabs.sticky'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>